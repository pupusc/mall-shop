关于本次迭代对应脚本执行注意点：
1、首先执行 "初始化数据脚本.sql"；
2、如果未购买crm不需要执行 "crm初始化脚本.sql";
3、关闭crm标示对应脚本(未购买crm，请执行该脚本)
update `sbc-setting`.`system_config` set status = 0 where config_type = 'crm';
update `sbc-setting`.`menu_info` set del_flag = 1 where menu_id = 'ff80808176ae86e40176b1c2a6320001';


## canal更改
canal配置修改（/canal/conf/example/instance.properties）:
修改instance.properties
```properties
canal.instance.filter.regex=sbc-goods.goods_info,sbc-goods.goods_cate,sbc-goods.goods_brand,sbc-goods.store_cate,sbc-goods.store_cate_goods_rela,sbc-goods.goods_info_spec_detail_rel,sbc-customer.customer,sbc-customer.customer_detail,sbc-customer.customer_level,sbc-customer.employee,sbc-customer.store,sbc-customer.store_customer_rela,sbc-customer.store_level,sbc-account.customer_funds,sbc-order.goods_customer_follow_action,sbc-order.purchase_action,sbc-goods.goods,sbc-goods.goods_evaluate,sbc-marketing.distribution_record,sbc-goods.goods_share_record,sbc-customer.customer_sign_record_action,sbc-customer.store_share_record,sbc-customer.store_customer_follow_action,sbc-customer.invite_new_record,sbc-customer.store_evaluate
```
## kafka更改
新增topic并建立多分区
```shell script
/data/kafka/bin/kafka-topics.sh --bootstrap-server 172.19.26.206:9092 -create --partitions 5 --topic customer_follow 
```

## 请求头增加埋单终端信息
terminal 字段

## 新增sbc-service-dw服务（未购买crm请忽略）
新增加微服务：
sbc-service-dw（大数据平台服务api调用）、dbreplay-hadoop（将数据日志会放到大数据平台）
新增了sbc-service-dw服务，对应的配置文件sbc-service-dw.properties
dw服务内部相关的配置请详见dw服务的doc目录

## crm的配置文件（未购买crm请忽略）
jdbc链接必须带上&serverTimezone=Asia/Shanghai&allowMultiQueries=true
```properties
spring.datasource.hikari.jdbc-url=jdbc:mysql://127.0.0.1:3306/sbc-crm?characterEncoding=UTF-8&&zeroDateTimeBehavior=convertToNull&autoReconnect=true&failOverReadOnly=false&connectTimeout=0&serverTimezone=Asia/Shanghai&allowMultiQueries=true
```

## perseus服务application.properties增加配置项

```properties
#-----------------------------------------
# kafka config
# ----------------------------------------
kafka.send.enabled=true
spring.kafka.bootstrap-servers=127.0.0.1:9092
spring.kafka.producer.retries=0
spring.kafka.producer.batch-size=16384
spring.kafka.producer.buffer-memory=33554432
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.properties.linger.ms=1

```
注意: 如果未购买crm，kafka.send.enabled不需要配置或者配置成false



