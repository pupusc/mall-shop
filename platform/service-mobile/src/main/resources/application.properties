# ----------------------------------------
# application info
# ----------------------------------------
info.app.name=B2B-H5
info.app.description=B2B-H5
info.build.artifact=@project.artifactId@
info.build.version=@project.version@
info.app.domain=http://kstore.wanmi.com
# ----------------------------------------
# actuator settings
# ----------------------------------------
management.server.port=7002
management.endpoints.enabled-by-default=false
management.endpoints.web.base-path=/act
management.endpoint.info.enabled=true
management.endpoint.health.enabled=true
management.endpoint.mappings.enabled=true
management.endpoint.env.enabled=true
management.endpoints.web.exposure.include=env,health,info,mappings
management.endpoint.health.show-details=always
# ----------------------------------------
# log config
# ----------------------------------------
logging.level.root=INFO
logging.level.com.wanmi=INFO
logging.level.org.springframework=INFO
logging.config=classpath:logback.xml


request.log.enable=true
request.log.need-result=true
request.log.log-type=0


spring.cloud.nacos.discovery.server-addr=172.16.72.228:8848
# ----------------------------------------
# server settings
# ----------------------------------------
server.port=6082
server.servlet.session.timeout=1800
server.tomcat.max-threads=200
server.error.whitelabel.enabled=false
server.error.include-stacktrace=ALWAYS
spring.jpa.show-sql=true
spring.jpa.open-in-view=true

# ----------------------------------------
# xxl-job \u5206\u5E03\u5F0F\u4EFB\u52A1\u8C03\u5EA6
# ----------------------------------------
xxl.job.admin.addresses = http://172.16.72.228:8990/xxl-job-admin
### xxl-job executor address
xxl.job.executor.appname = xxl-job-executor-service-mobile
xxl.job.executor.ip =
xxl.job.executor.port = 8993
### xxl-job, access token
xxl.job.accessToken = b5f7ed32b2e24789bdce1308afcafebe
### xxl-job log path
xxl.job.executor.logpath=./log/jobhandler
### xxl-job log retention days
xxl.job.executor.logretentiondays=-1
# ----------------------------------------
# spring cloud
# ----------------------------------------
spring.application.name=lzw-sbc-mobile
ribbon.ReadTimeout=60000
ribbon.ConnectTimeout=60000
#spring cloud stream 延迟队列配置--抢购商品订单未进行下单，将对应对应商品库存归还延迟队列
#注意点：RabbitMQ版本必须是3.6.X以上版本，否则延迟队列报错
spring.cloud.stream.bindings.flash-sale-order-cancel-return-stock-topic-output.destination=flash-sale-order-cancel-return-stock-delay-topic
spring.cloud.stream.rabbit.bindings.flash-sale-order-cancel-return-stock-topic-output.producer.delayed-exchange=true
spring.cloud.stream.bindings.flash-sale-order-cancel-return-stock-topic-input.destination=flash-sale-order-cancel-return-stock-delay-topic
spring.cloud.stream.bindings.flash-sale-order-cancel-return-stock-topic-input.group=flash-sale-order-cancel-return-stock
spring.cloud.stream.rabbit.bindings.flash-sale-order-cancel-return-stock-topic-input.consumer.delayed-exchange=true

spring.cloud.stream.bindings.q-rush-to-buy-flash-sale-goods-input.destination=q-rush-to-buy-flash-sale-goods-wg
spring.cloud.stream.bindings.q-rush-to-buy-flash-sale-goods-output.destination=q-rush-to-buy-flash-sale-goods-wg

spring.cloud.stream.bindings.q-rush-to-appointment-sale-goods-input.destination=q-rush-to-appointment-sale-goods
spring.cloud.stream.bindings.q-rush-to-appointment-sale-goods-output.destination=q-rush-to-appointment-sale-goods
# ----------------------------------------
# datasource
# ----------------------------------------
spring.datasource.hikari.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.hikari.jdbc-url=jdbc:mysql://rm-bp182fitehfamv41c.mysql.rds.aliyuncs.com:3306/sbc-bff?characterEncoding=UTF-8&&zeroDateTimeBehavior=convertToNull&autoReconnect=true&failOverReadOnly=false&connectTimeout=0
spring.datasource.hikari.username=fddsh_mall
spring.datasource.hikari.password=malladmin@2018
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=60000
spring.datasource.hikari.connection-timeout=30000
#-----------------------------------------------
# seata
#-----------------------------------------------
seata.registry.type=nacos
seata.registry.nacos.server-addr=172.16.72.228:8848
seata.registry.nacos.namespace=public
seata.registry.nacos.cluster=default
seata.enabled=true
seata.application-id=sbc-mobile
#Seata 事务组编号，用于 TC 集群名 Seata 服务配置项，对应 ServiceProperties 类
seata.tx-service-group=sbc-mobile-group
# 虚拟组和分组的映射
seata.service.vgroup-mapping.sbc-mobile-group=default
seata.enableAutoDataSourceProxy=true

# ----------------------------------------
# mongodb config
# ----------------------------------------
spring.data.mongodb.uri=mongodb://root:malladmin%402018@dds-bp1cd168ec4224741.mongodb.rds.aliyuncs.com:3717,dds-bp1cd168ec4224742.mongodb.rds.aliyuncs.com:3717/s2b?authSource=admin&authMechanism=SCRAM-SHA-1
#spring.data.mongodb.host=dds-bp1cd168ec4224741.mongodb.rds.aliyuncs.com
#spring.data.mongodb.port=3717
#spring.data.mongodb.database=admin
#spring.data.mongodb.username=root
#spring.data.mongodb.password=malladmin@2018
spring.data.mongodb.repositories.type=auto


async.thread-name-prefix=b2b-h5-async-executor-
async.corePoolSize=5
async.maxPoolSize=50
async.queueCapacity=2000
# ----------------------------------------
# elasticsearch config
# ----------------------------------------
#spring.data.elasticsearch.cluster-name=elasticsearch-ares
#spring.data.elasticsearch.cluster-nodes=172.19.26.194:9300
spring.data.elasticsearch.cluster-name=elasticsearch
spring.data.elasticsearch.cluster-nodes=172.16.72.228:9300
spring.elasticsearch.rest.uris=http://172.16.72.228:9200
# ----------------------------------------
# redis config
# ----------------------------------------spring.redis.database=8
spring.redis.host=172.16.72.228
spring.redis.database=0
spring.redis.port=6379
spring.redis.password=
spring.redis.timeout=5000
spring.redis.lettuce.pool.max-active=20
spring.redis.lettuce.pool.max-idle=10

#redisson
redisson.url=172.16.72.228:6379
redisson.database=0
redisson.password=
redisson.injection=true

### 接收文件最大尺寸
spring.servlet.multipart.enabled = true
spring.servlet.multipart.max-file-size = 50MB
spring.servlet.multipart.max-request-size = 55MB
# ----------------------------------------
# json message converter
# ----------------------------------------
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.serialization.write-null-map-values=true
# ----------------------------------------
# fast DFS
# ----------------------------------------
spring.mvc.dispatch-options-request=true

####JWT配置
jwt.secret-key=eda1782204cf41efaca1e051ccc610be62acdcf24c09f011f343583c41cfb941f
jwt.url-patterns=/**
jwt.excluded-urls=/login,/register,/registerEnterprise,/app/register,/checkAccount,\
  /checkSmsByRegister,\
  /app/checkSmsByRegister,\
  /pointsMall/cateList,/pointsGoods/*,/goods/points/spu/*,\
  /perfect,/checkSmsByForgot,/validateSmsByForgot,\
  /passwordByForgot,/system/**,/pay/getWxConfig,/pay/getWxOpenId/**,/customer/customerInfoById/*,\
  /third/login/wechat/set/detail/*,/third/login/wechat/auth/**,/third/login/wechat/status/*,\
  /third/login/bind/sendCode/**,/userSetting/isVisitWithLogin,/site/front/**,/goods/skuListFront,/goods/spuListFront,/site/*/calcMarketingByMarketingIdFront,\
  /goods/unLogin/**,/goods/getSkuQrCode,/store/unLogin/**,/goods/goodsBrand/**,/storeCate,\
  /goods/props/all/**,/goods/allGoodsCates,/goods/props/**, \
  /companyInfo,/store/storeDocument,/store/storeVipFront, \
  /stores,/customerService/qq/detail/**,/gift/unLogin/**,/swagger-resources/**, /v2/api-docs, \
  /login/verification/**,/register/modal,/checkSmsByRegister/web/modal/*,/config/goodsDisplayDefault, \
  /marketing/*,/coupon-info/front/**,/store/homeInfoFront/**,/coupon-cate/list,\
  /third/share/weChat/getSign,/patchca/**,/mobile-setting/**,/test,/swagger-resources/**, /v2/api-docs,/mobile/config/**,\
 /goods/shop/sku-list-to-c, /goods/shop-info/**,/distribute/setting,/goods/shop/goods-detail/**,\
  /distribution/miniProgram-code/decodeParam/**,/distribute/queryOpenFlag,/distribute/check/status,/pay/getAppId/**,/pay/getOpenId/**,\
  /distribution/miniProgram-code/distributionMiniProgramQrCode,/pointsConfig,/goodsEvaluate/spuGoodsEvaluatePage,\
  /goodsEvaluate/getStoreGoodsEvaluateNum/*,/growthValue/isOpen,/systemGoodsEvaluateConfig/isGoodsEvaluate,\
  /pointsMall/hotExchange,/pointsMall/page,/pointsMall/pageCoupon,/systemGoodsEvaluateConfig/isGoodsEvaluate,/goodsDetailEvaluate/top3EvaluateAndPraise/*,\
    /goodsDetailEvaluate/top3EvaluateAndPraiseBySkuId/*,/goods/goodsDetailProper/*,/goods/goodsDetailSimple/*,/goodsDetailEvaluate/evaluatePage,/distribution/miniProgram-code/decodeParam/**,/distribute/queryOpenFlag,/distribute/check/status,/pay/getAppId/**,/pay/getOpenId/**,/distribution/miniProgram-code/distributionMiniProgramQrCode \
  ,/groupon/instance/page,/unLogin/groupon/goods-detail/spu/{skuId},/unLogin/groupon/groupon-detail/{grouponNo},\
  /distribution/miniProgram-code/decodeParam/**,/distribute/queryOpenFlag,/distribute/check/status,/pay/getAppId/**,/pay/getOpenId/**,\
  /distribution/miniProgram-code/distributionMiniProgramQrCode,/system/queryServerTime,\
  /error,\
  /groupon/setting/info,/groupon/cate/list,/groupon/center/list,/groupon/grouponInstanceInfo/**,/getRegisterLimitType,/register/check,\
  /third/login/wechat/logininfo/**,/third/login/wechat/logininfo,/third/login/wechat/weapp/getSessionKey/**,\
  /flashsalebase/*/isInProgress,/flashsale/*List,/swagger-ui.html/**,/webjars/**,/domain/domain-store,\
  /umengConfig/getKey,/vas/setting/list,/vas/setting/detail,/vas/iep/setting/**,/enterprise/customer/**,\
  /common/uploadResource,/authorize/**,/popular_search_terms/list,/search_associational_word/like_associational_word,\
  /preset_search_terms/list,/distribution-setting/**,/popup_administration/**,/hoverNavMobile/**,/third/login/wechat/weChatLogin,\
  /third/login/wechat/weapp/authorize,/magic-page/main.html,/magic-page/main-config,\
  /liveroomweb/isOpen,/goods/hot/goodsInfo,\
  /liveroomweb/list,/liveroomweb/page\
  ,/appointmentsale/**/isInProgress,/bookingsale/**/isInProgress,/ruleinfo/getRuleContentAll,/distribute/unLogin-setting,\
  /appointment/goods/page,/flashsale/goodsList,/booking/goods/page,/groupon/goods/page,\
  /platformaddress/**,/platformaddress/*/**,/privacypolicy/queryPrivacyPolicy,/third/share/weChat/*,/third/wechat/status/*,\
  /customer/points/share,/flashsale/xsite/goodsList,/cyclebuy/*,\
  /autoLogin,/authLogin,/preposition,/verify,/sendCode,/mobile/booklistmodel/**

####万米开放平台客户端sdk配置
com.wanmi.open.sdk.appKey=wm_98324kas
com.wanmi.open.sdk.appSecret=123ashdka1kdha09
com.wanmi.open.sdk.appNo=南京顺丰速递

########swagger begin###########
## 标题
swagger.title=SBC移动端API接口
## 描述
swagger.description=如有接口描述不清晰, 请联系相应开发人员添加
## 版本
swagger.version=1.0.0
## 开启/关闭
swagger.enable=true

# ----------------------------------------
# lcn分布式事务
# ----------------------------------------
#由于springcloud默认是开启的重试机制，开启次机制以后会导致当springcloud请求超时时会重复调用业务模块，从而会引发数据混乱
ribbon.MaxAutoRetriesNextServer=0


# ----------------------------------------
# rabbitmq config
# ----------------------------------------
spring.rabbitmq.host=172.16.72.228
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
spring.cloud.stream.default.group=group-1

magic.page.main.config=https://app-render.shouqianba.com/magic/d2cStore/000000/weixin/index 
## 知豆落地页普通商品展示
know.ordinary.good.ids=2c90e87478cb17a201795503b2921cb3,625623422,2c90e85678cb15db01797850580838e2,626358990
index.config = “{}”