@startuml
 start
  :用户进入订单确认页;
  :查询当前用户可用积分;
  :进行订单抵扣;
  :提交订单;
  :订单逻辑增加锁定积分逻辑;
  :提交订单调用锁定积分接口;
  if (是否成功支付?) then (Y)
    :调用积分扣除接口;
  else(N)
    :调用积分释放接口;
  endif
  stop
@enduml